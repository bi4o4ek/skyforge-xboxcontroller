# skyforge-xboxcontroller
Play Skyforge with xbox controller

# Описание
Данный AutoIt скрипт позволяет легко и просто играть в Skyforge, используя Xbox360 Controller.
Причем играть с этого геймпада настолько удобно, что даже в PvP чувствуешь себя наравне с обычными игроками, использующими клавиатуру и мышь.
Речь идет об этой игре https://sf.mail.ru
И об этом контроллере, подключенном к компьютеру под управлением Windows https://www.microsoft.com/hardware/ru-ru/p/xbox-360-wireless-controller-for-windows

Обычные программы вроде Xpadder не будут работать, т.к. в Skyforge зачем-то стоит защита от метода эмуляции нажатий SendEvent.

# Установка
Предполагаю, что геймпад уже подключен и установлены для него последние драйверы. Иначе подключайте и ставьте, например, отсюда https://www.microsoft.com/hardware/ru-ru/d/xbox-360-controller-for-windows

Устанавливаем AutoIt, через который работает этот скрипт https://www.autoitscript.com/site/autoit/downloads/

Качаем отсюда файлы SkyforgeXbox360Controller.au3 (это основной скрипт) и _IsPressed360.au3 (скрипт, определяющий нажатия на Xbox360 контроллер). Кладем их в одну папку, например, на рабочий стол.

Запускаем скрипт SkyforgeXbox360Controller.au3 (двойным щелчком мыши) и стартуем собственно игру Skyforge.

В игре нужно действие, назначенное на левую кнопку мыши, переназначить на клавишу "[" на клавиатуре. А действие, назначенное на правую кнопку мыши, переназначить на клавишу "]". Причем назначить эти клавиши в качестве альтернативы будет не достаточно, нужно их поставить именно как основные. Это связано с тем, что в Skyforge есть баг, при котором именно для этих действий работает только то, что находится в левой колонке в настройках. Багрепорт я им отправил, но видимо, разработчики считают его недостаточно критическим.

А зачем вообще нужно переназначать эти действия с мыши на клавиши? Дело в том, что в Skyforge есть еще один баг, когда при управлении движением с помощью геймпада персонаж не может стрелять левой и правой кнопкой мыши пока движется. Нужно будет остановиться и только после этого стрелять. Не удобно, правда? А вот если переназначить с мыши на клавиатуру, то при нажатии кнопок на геймпаде будет эмулироваться нажатие клавиш клавиатуры, а не мыши, и в этом случае управление с геймпада будет таким же удобным, как обычное.

# Назначения кнопок
В игре сразу есть поддержка движения персонажа с помощью левого стика, а также оглядывания с помощью правого стика. Но чтобы работали остальные поможет этот скрипт.

Какая клавиша будет эмулироваться при нажатии на кнопки геймпада можно посмотреть в самом файле SkyforgeXbox360Controller.au3

# Переназначение кнопок
Лично мне такое управление кажется удобным. Но при желании его можно переназначить.

Для этого потребуется минимальное понимание, как этот скрипт работает.
При нажатии на кнопку на геймпаде происходит событие с определенным номером.

Какой номер соответствует какой кнопке геймпада можно посмотреть в файле _IsPressed360.au3
А в скрипте SkyforgeXbox360Controller.au3 этим номерам ставится в соответствие клавиша на клавиатуре.
Причем можно распознавать сразу две кнопки. Так, к примеру, нажав на LB и двинув левый стик вверх произойдет эмуляция нажатия "SHIFT"+"w", и персонаж произведет рывок вперед.





